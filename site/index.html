<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Maintenance Mode ‚Äî Chaos Control Room</title>
  <style>
    :root{
      --bg:#0b0f17;
      --card:rgba(255,255,255,.07);
      --card2:rgba(255,255,255,.05);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --accent:#7c3aed;
      --ok:#22c55e;
      --warn:#fde68a;
      --bad:#fca5a5;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 18px;
      --vibe: 40; /* 0..100 */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(1200px 600px at 70% 20%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(900px 500px at 20% 80%, rgba(34,197,94,.12), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      padding:24px;
      overflow-x:hidden;
    }
    .wrap{
      width:min(1180px, 100%);
      display:grid;
      gap:18px;
      grid-template-columns: 1.25fr .75fr;
      align-items:start;
    }
    @media (max-width: 980px){ .wrap{grid-template-columns:1fr} }

    .card{
      background:linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .pad{padding:18px 18px 14px}
    .title{
      font-size:clamp(22px, 3vw, 34px);
      line-height:1.1;
      margin:0;
      letter-spacing:-0.02em;
    }
    .subtitle{
      margin:8px 0 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
      max-width:72ch;
    }
    .top{
      display:flex;
      gap:14px;
      justify-content:space-between;
      flex-wrap:wrap;
      align-items:flex-start;
    }
    .pillrow{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .pill{
      font-size:12px;
      color:rgba(255,255,255,.86);
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      padding:7px 10px;
      border-radius:999px;
      user-select:none;
      white-space:nowrap;
    }
    .pill b{color:white}
    .progress{
      margin-top:14px;
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .bar{
      height:100%;
      width:0%;
      border-radius:999px;
      background:linear-gradient(90deg, var(--accent), #3b82f6);
      transition:width .6s ease;
    }
    .small{
      margin:10px 0 0;
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .small code{
      background:rgba(0,0,0,.25);
      padding:2px 6px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.10);
      color:rgba(255,255,255,.85);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    }

    /* Buttons */
    .btns{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    button{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      padding:9px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:800;
      font-size:13px;
      letter-spacing:-0.01em;
    }
    button:hover{background:rgba(255,255,255,.10)}
    button:active{transform:translateY(1px)}
    .primary{background:rgba(124,58,237,.22); border-color:rgba(124,58,237,.45);}
    .danger{background:rgba(239,68,68,.18); border-color:rgba(239,68,68,.35);}
    .ok{background:rgba(34,197,94,.16); border-color:rgba(34,197,94,.35);}
    .toggleOn{outline:2px solid rgba(255,255,255,.18)}

    /* Snake */
    canvas{width:100%; height:auto; display:block; background:rgba(0,0,0,.25);}
    .gameHeader{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:14px 18px;
      border-top:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.18);
      flex-wrap:wrap;
    }
    .stats{display:flex; gap:12px; flex-wrap:wrap; font-size:12px; color:var(--muted)}
    .stats span{color:rgba(255,255,255,.85)}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 12px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);
      padding:2px 6px;
      border-radius:8px;
      color:rgba(255,255,255,.88);
    }

    /* Right column */
    .h2{margin:0 0 10px; font-size:16px; letter-spacing:-0.01em;}
    .log{
      border:1px dashed rgba(255,255,255,.16);
      border-radius:14px;
      padding:12px;
      background:rgba(0,0,0,.18);
      min-height:160px;
      font-size:13px;
      color:rgba(255,255,255,.86);
      line-height:1.5;
    }
    .log .muted{color:var(--muted)}
    .log .ok{color: #86efac}
    .log .warn{color: #fde68a}
    .log .nope{color: #fca5a5}

    .panel{
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.12);
    }

    .meter{
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
      margin-top:8px;
    }
    .meter > div{
      height:100%;
      width:0%;
      background:linear-gradient(90deg, #22c55e, #fde68a, #ef4444);
      transition:width .35s ease;
    }

    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:10px}
    .row{display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap}

    input[type="range"]{width:100%}

    .bingo{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:8px;
      margin-top:10px;
    }
    .tile{
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      font-size:12px;
      cursor:pointer;
      user-select:none;
      line-height:1.2;
    }
    .tile.on{background:rgba(34,197,94,.18); border-color:rgba(34,197,94,.35);}

    /* Toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(0,0,0,.65);
      border:1px solid rgba(255,255,255,.14);
      padding:10px 14px;
      border-radius:999px;
      box-shadow:var(--shadow);
      font-size:13px;
      color:rgba(255,255,255,.92);
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease, transform .25s ease;
      z-index:50;
      max-width:min(92vw, 760px);
      text-align:center;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px);}

    /* Modal */
    .modalBack{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:60;
      padding:18px;
    }
    .modal{
      width:min(620px, 100%);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;
      box-shadow:var(--shadow);
      padding:16px;
    }
    .modal h3{margin:0 0 6px; letter-spacing:-0.01em}
    .modal p{margin:0 0 12px; color:var(--muted); font-size:14px; line-height:1.45}
    .modal .actions{display:flex; gap:8px; justify-content:flex-end; flex-wrap:wrap}

    /* Boss Screen */
    .boss{
      position:fixed; inset:0;
      background:linear-gradient(180deg, #0b1220, #070b12);
      display:none;
      z-index:70;
      color:rgba(255,255,255,.92);
      padding:26px;
    }
    .bossHeader{
      display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;
      margin-bottom:16px;
    }
    .bossTitle{
      font-weight:900;
      letter-spacing:-0.02em;
      font-size:18px;
    }
    .bossSub{color:rgba(255,255,255,.65); font-size:12px}
    .bossGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    @media (max-width:900px){ .bossGrid{grid-template-columns:1fr} }
    .bossCard{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      border-radius:16px;
      padding:14px;
    }
    .fakeTable{
      width:100%;
      border-collapse:collapse;
      font-size:12px;
      color:rgba(255,255,255,.86);
    }
    .fakeTable th,.fakeTable td{
      border-bottom:1px solid rgba(255,255,255,.08);
      padding:8px 6px;
      text-align:left;
    }
    .bossKbd{
      display:inline-block;
      padding:2px 6px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      color:rgba(255,255,255,.86);
    }

    /* Meme confetti */
    .floaty{
      position:fixed;
      left:0; top:0;
      font-size:22px;
      opacity:.85;
      pointer-events:none;
      animation: drift linear forwards;
      z-index:40;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
    }
    @keyframes drift{
      from{transform:translate(var(--x), -40px) rotate(0deg)}
      to{transform:translate(var(--x2), calc(100vh + 60px)) rotate(360deg)}
    }

    .footer{margin-top:10px; font-size:12px; color:var(--muted);}
    .badge{
      display:inline-block;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      font-size:12px;
      color:rgba(255,255,255,.86);
      margin-left:8px;
    }
  </style>
</head>
<body>

  <div class="toast" id="toast"></div>

  <!-- Modal -->
  <div class="modalBack" id="modalBack" role="dialog" aria-modal="true">
    <div class="modal">
      <h3 id="modalTitle">Error</h3>
      <p id="modalBody">Something happened.</p>
      <div class="actions">
        <button id="modalClose" class="primary">Close</button>
      </div>
    </div>
  </div>

  <!-- Boss Screen -->
  <div class="boss" id="boss">
    <div class="bossHeader">
      <div>
        <div class="bossTitle">Quarterly Performance Dashboard <span class="badge">Very Serious‚Ñ¢</span></div>
        <div class="bossSub">Press <span class="bossKbd">B</span> to return ‚Ä¢ You look extremely productive right now</div>
      </div>
      <div class="bossSub">Status: ‚ÄúReviewing KPIs‚Äù ‚Ä¢ Confidence: High ‚Ä¢ Reality: Optional</div>
    </div>
    <div class="bossGrid">
      <div class="bossCard">
        <div style="font-weight:900; margin-bottom:10px; letter-spacing:-0.01em;">Key Metrics</div>
        <table class="fakeTable" aria-label="Fake KPI table">
          <thead>
            <tr><th>Metric</th><th>Value</th><th>Trend</th></tr>
          </thead>
          <tbody id="bossRows"></tbody>
        </table>
      </div>
      <div class="bossCard">
        <div style="font-weight:900; margin-bottom:10px; letter-spacing:-0.01em;">Notes</div>
        <div style="color:rgba(255,255,255,.75); font-size:13px; line-height:1.5">
          ‚Ä¢ Align stakeholders (translation: send one email and disappear)<br/>
          ‚Ä¢ Improve synergy (translation: rename folders)<br/>
          ‚Ä¢ Reduce latency (translation: restart router)<br/><br/>
          <span style="color:rgba(255,255,255,.60)">Pro tip: occasionally nod at the screen.</span>
        </div>
      </div>
    </div>
  </div>

  <main class="wrap" id="mainUI">
    <!-- Left -->
    <section class="card">
      <div class="pad">
        <div class="top">
          <div>
            <h1 class="title">Maintenance Mode üß∞ ‚Äî Chaos Control Room</h1>
            <p class="subtitle">
              We‚Äôre fixing the site. Translation: we changed one line and now the whole internet is judging us.
              <br><span style="color:rgba(255,255,255,.75)">Distraction tools are provided below for‚Ä¶ ‚Äúemotional stability‚Äù.</span>
            </p>

            <div class="pillrow">
              <div class="pill">Status: <b id="statusText">Negotiating with the database</b></div>
              <div class="pill">Coffee: <b id="coffeeLevel">critical</b></div>
              <div class="pill">Bug count: <b id="bugCount">plotting</b></div>
              <div class="pill">Server mood: <b id="serverMood">moody</b></div>
            </div>

            <div class="progress" aria-label="fake progress bar">
              <div class="bar" id="progressBar"></div>
            </div>
            <div class="small">
              <span>Estimated completion: <code id="eta">soon‚Ñ¢</code></span>
              <span>Actual completion: <code id="truth">ask again later</code></span>
            </div>

            <div class="pillrow" style="margin-top:12px">
              <button class="danger" id="panicBtn">üö® PANIC BUTTON</button>
              <button id="blameBtn">üßæ Generate Blame</button>
              <button class="primary" id="deployBtn">üöÄ Deploy Now</button>
              <button id="errorBtn">üßØ Fake Error Popup</button>
              <button id="internBtn">üßë‚Äçüíª Summon Intern</button>
              <button class="ok" id="lootBtn">üéÅ Open Loot Box</button>
            </div>

            <div class="pillrow" style="margin-top:10px">
              <button id="roastBtn">üî• Roast Me</button>
              <button id="memeBtn">üåÄ Meme Mode</button>
              <button id="soundBtn">üîä Sound FX: Off</button>
              <button id="helpBtn">‚ùì Secret Controls</button>
            </div>
          </div>

          <div class="panel" style="min-width:280px; flex:1">
            <div class="row">
              <div style="font-weight:900; letter-spacing:-0.01em">Rage Meter</div>
              <div class="pill">Boss Key: <b>B</b></div>
            </div>
            <div class="footer">Increases when you die. Decreases when you stop taking it personally.</div>
            <div class="meter"><div id="rageBar"></div></div>
            <div class="footer"><span id="rageLabel">Calm-ish.</span></div>

            <div class="panel" style="margin-top:10px">
              <div class="row">
                <div style="font-weight:900; letter-spacing:-0.01em">Vibe Slider</div>
                <div class="pill">Chill ‚Üê‚Üí Chaos</div>
              </div>
              <input id="vibe" type="range" min="0" max="100" value="40" aria-label="Vibe slider"/>
              <div class="footer" id="vibeLabel">Current vibe: mildly chaotic.</div>
            </div>
          </div>
        </div>
      </div>

      <canvas id="game" width="720" height="480" aria-label="Snake game"></canvas>

      <div class="gameHeader">
        <div class="stats">
          <div>Score: <span id="score">0</span></div>
          <div>Best: <span id="best">0</span></div>
          <div>Speed: <span id="speed">1.0x</span></div>
          <div class="muted">
            Controls: <span class="kbd">‚Üë</span><span class="kbd">‚Üì</span><span class="kbd">‚Üê</span><span class="kbd">‚Üí</span> /
            <span class="kbd">WASD</span> ‚Ä¢ Pause <span class="kbd">P</span>
          </div>
        </div>
        <div class="btns">
          <button class="primary" id="startBtn">Start / Restart</button>
          <button id="pauseBtn">Pause</button>
          <button id="hardBtn" title="For the brave (or the bored)">Hard Mode</button>
        </div>
      </div>
    </section>

    <!-- Right -->
    <aside class="card">
      <div class="pad">
        <h2 class="h2">Live Engineering Updates (definitely real)</h2>
        <div class="log" id="log"></div>

        <div class="panel">
          <div style="font-weight:900">Developer Excuse Bingo</div>
          <div class="footer">Tap excuses until you get a BINGO. It won‚Äôt fix the site, but it will fix your mood.</div>
          <div class="bingo" id="bingo"></div>
          <div class="pillrow" style="margin-top:10px">
            <button id="resetBingo">Reset Bingo</button>
          </div>
        </div>

        <div class="panel">
          <div style="font-weight:900">Secret Achievement Tracker</div>
          <div class="footer" id="achievements">Achievements: none (yet). Your legacy is being built.</div>
        </div>

        <div class="footer">
          Pro tip: press <span class="kbd">B</span> if someone walks in. Instantly become ‚ÄúCorporate‚Äù.
        </div>
      </div>
    </aside>
  </main>

  <script>
    // ---------------------------
    // Helpers
    // ---------------------------
    const $ = (id) => document.getElementById(id);
    const toast = $("toast");
    const logEl = $("log");

    function randomPick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1700);
    }

    function addLog(line, cls="muted"){
      const p = document.createElement("div");
      p.innerHTML = `<span class="${cls}">‚Ä¢ ${line}</span>`;
      logEl.prepend(p);
      while(logEl.childNodes.length > 14) logEl.removeChild(logEl.lastChild);
    }

    // ---------------------------
    // Simple WebAudio "beep" (only if enabled)
    // ---------------------------
    let sfxOn = false;
    let audioCtx = null;
    function beep(freq=440, ms=70){
      if(!sfxOn) return;
      try{
        audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = "sine";
        o.frequency.value = freq;
        g.gain.value = 0.02;
        o.connect(g); g.connect(audioCtx.destination);
        o.start();
        setTimeout(()=>{ o.stop(); }, ms);
      }catch(e){}
    }

    // ---------------------------
    // Achievements
    // ---------------------------
    const achievementsEl = $("achievements");
    const unlocked = new Set();
    function unlock(name){
      if(unlocked.has(name)) return;
      unlocked.add(name);
      achievementsEl.textContent = "Achievements: " + [...unlocked].join(", ");
      showToast("üèÜ Achievement unlocked: " + name);
      addLog("Achievement unlocked: " + name, "ok");
      beep(880, 120);
    }

    // ---------------------------
    // Maintenance fluff
    // ---------------------------
    const statusText = $("statusText");
    const coffeeLevel = $("coffeeLevel");
    const bugCount = $("bugCount");
    const serverMood = $("serverMood");
    const progressBar = $("progressBar");
    const eta = $("eta");
    const truth = $("truth");

    let vibe = 40; // 0..100
    function vibeLabel(){
      return vibe < 20 ? "zen mode. suspiciously calm." :
             vibe < 45 ? "mildly chaotic." :
             vibe < 70 ? "chaos with a spreadsheet." :
             "full goblin mode.";
    }
    function vibeIntensity(){ return 0.6 + (vibe/100)*1.2; } // 0.6..1.8

    const statuses = [
      "Negotiating with the database",
      "Turning it off and on again (for spiritual reasons)",
      "Applying duct tape (digital edition)",
      "Reading the error message this time. Maybe.",
      "Updating dependencies (a.k.a. summoning chaos)",
      "Teaching the server empathy",
      "Refactoring (aka rearranging the deck chairs)",
      "Asking the API nicely",
      "Looking at the bug until it confesses"
    ];
    const coffees = ["critical", "low", "acceptable", "dangerously optimistic", "espresso-powered", "existential"];
    const bugs = ["plotting", "multiplying", "in witness protection", "too confident", "doing parkour", "cosplaying features"];
    const moods = ["moody", "confused", "surprisingly cooperative", "needs attention", "vibing", "dramatic"];

    let fakeProgress = 0;

    function tickMaintenance(){
      statusText.textContent = randomPick(statuses);
      coffeeLevel.textContent = randomPick(coffees);
      bugCount.textContent = randomPick(bugs);
      serverMood.textContent = randomPick(moods);

      const delta = ((Math.random() * 10) - 3) * vibeIntensity();
      fakeProgress = Math.max(0, Math.min(97, fakeProgress + delta));
      progressBar.style.width = fakeProgress.toFixed(0) + "%";

      const etas = ["soon‚Ñ¢", "in a sec", "after one more coffee", "shortly-ish", "when Mercury stops retrograding"];
      eta.textContent = randomPick(etas);

      const truths = [
        "ask again later",
        "depends on the bug‚Äôs vibe",
        "classified information",
        "when JavaScript feels like it",
        "after we stop touching it",
        "after the server finishes its emotional arc"
      ];
      truth.textContent = randomPick(truths);

      const logLines = [
        ["Cleared cache. Cache cleared *us* emotionally.", "warn"],
        ["Found a bug. It had a family.", "warn"],
        ["Deployed a fix. Undeployed it for character development.", "nope"],
        ["Server replied: ‚Äòlol‚Äô. Investigating.", "warn"],
        ["Added console.log(). Problem got shy.", "ok"],
        ["Refactored code. Now it‚Äôs ‚Äòart‚Äô.", "ok"],
        ["Database requested boundaries. Respecting that.", "ok"],
        ["Reduced bugs by 0.3%. We take wins.", "muted"],
        ["We solved it. Then remembered we didn‚Äôt.", "nope"]
      ];
      const [line, cls] = randomPick(logLines);
      addLog(line, cls);

      if(fakeProgress > 90) unlock("Almost There‚Ñ¢");
    }

    addLog("Booting maintenance mode‚Ä¶ secure your snacks.", "ok");
    addLog("Loading comedy module‚Ä¶ done.", "ok");
    tickMaintenance();
    setInterval(tickMaintenance, 3000);

    // ---------------------------
    // Modal
    // ---------------------------
    const modalBack = $("modalBack");
    const modalTitle = $("modalTitle");
    const modalBody = $("modalBody");
    $("modalClose").addEventListener("click", ()=> modalBack.style.display = "none");
    function showModal(title, body){
      modalTitle.textContent = title;
      modalBody.textContent = body;
      modalBack.style.display = "flex";
      beep(220, 120);
    }

    // ---------------------------
    // Meme mode
    // ---------------------------
    let memeMode = false;
    let memeTimer = null;
    function spawnFloaty(){
      const icons = ["üòÇ","üíÄ","üî•","üß†","üß∞","üöÄ","ü´†","üêç","ü•≤","‚ú®","üßª","üçï"];
      const d = document.createElement("div");
      d.className = "floaty";
      d.textContent = randomPick(icons);
      const x = Math.random() * 100;
      const x2 = x + (Math.random()*30 - 15);
      d.style.setProperty("--x", x + "vw");
      d.style.setProperty("--x2", x2 + "vw");
      d.style.animationDuration = (6 / vibeIntensity() + Math.random()*2) + "s";
      document.body.appendChild(d);
      setTimeout(()=>d.remove(), 9000);
    }

    function setMemeMode(on){
      memeMode = on;
      $("memeBtn").classList.toggle("toggleOn", memeMode);
      if(memeTimer) clearInterval(memeTimer);
      if(memeMode){
        showToast("Meme Mode ON. Professionalism has left the chat.");
        addLog("Meme mode enabled. Good luck explaining this.", "warn");
        unlock("Unprofessional");
        memeTimer = setInterval(()=>{ if(Math.random() < 0.7) spawnFloaty(); }, 450);
      }else{
        showToast("Meme Mode OFF. You are now ‚Äòemployable‚Äô again.");
        addLog("Meme mode disabled. HR is relieved.", "ok");
      }
    }

    // ---------------------------
    // Buttons (fun)
    // ---------------------------
    $("panicBtn").addEventListener("click", ()=>{
      const msgs = [
        "Panic activated ‚úÖ Nothing changed ‚úÖ (as expected)",
        "Emergency meeting scheduled with the hamster running the server.",
        "You pressed PANIC. The site pressed PANIC back.",
        "We screamed internally. Thanks for your contribution."
      ];
      showToast(randomPick(msgs));
      addLog("PANIC BUTTON pressed. Confidence decreased by 14%.", "warn");
      unlock("Panic Enjoyer");
      beep(330, 90);
    });

    $("blameBtn").addEventListener("click", ()=>{
      const blame = [
        "Blame assigned to: Wi-Fi spirits.",
        "Blame assigned to: Mercury retrograde.",
        "Blame assigned to: the intern (we don‚Äôt have one).",
        "Blame assigned to: a missing semicolon living its best life.",
        "Blame assigned to: ‚Äòthat one plugin‚Äô nobody remembers installing.",
        "Blame assigned to: cosmic rays flipping a bit (probably).",
        "Blame assigned to: user error (respectfully)."
      ];
      const msg = randomPick(blame);
      showToast(msg);
      addLog(msg, "warn");
      unlock("Accountability Avoider");
      beep(520, 70);
    });

    $("deployBtn").addEventListener("click", ()=>{
      unlock("Ship It");
      showToast("Deploying‚Ä¶ (dramatic music)");
      beep(660, 110);
      const steps = [
        ["Starting deployment‚Ä¶", "ok"],
        ["Packing pixels into boxes‚Ä¶", "ok"],
        ["Launching rocket üöÄ ‚Ä¶", "ok"],
        ["Rocket has feelings. Comforting rocket‚Ä¶", "warn"],
        ["Deployment complete ‚úÖ", "ok"],
        ["Site status: still maintenance üíÄ", "nope"]
      ];
      let i = 0;
      const t = setInterval(()=>{
        addLog(steps[i][0], steps[i][1]);
        i++;
        if(i >= steps.length) clearInterval(t);
      }, 420);
    });

    $("errorBtn").addEventListener("click", ()=>{
      showModal(
        "Unhandled Promise Rejection",
        "motivationNotFoundError: Cannot read properties of 'willpower' (reading 'exists')."
      );
      addLog("User encountered motivationNotFoundError. Relatable.", "warn");
      unlock("Motivation? Never Heard Of Her");
    });

    $("internBtn").addEventListener("click", ()=>{
      unlock("Summoned Help");
      const lines = [
        ["Summoning intern‚Ä¶", "ok"],
        ["Intern arrived: confident.", "warn"],
        ["Intern Googled: ‚Äòhow to fix website‚Äô‚Ä¶", "ok"],
        ["Intern pushed to production üò¨", "nope"],
        ["Intern is now ‚Äòlearning‚Äô (aka fleeing).", "warn"]
      ];
      showToast("Intern summoned. Outcome: unpredictable.");
      let i = 0;
      const t = setInterval(()=>{
        addLog(lines[i][0], lines[i][1]);
        i++;
        if(i >= lines.length) clearInterval(t);
      }, 380);
      beep(300, 80);
    });

    $("lootBtn").addEventListener("click", ()=>{
      const rewards = [
        ["+10 Morale", "ok"],
        ["+1 Bug", "warn"],
        ["Legendary Drop: ‚ÄòIt worked first try‚Äô (fake)", "ok"],
        ["Common Drop: ‚ÄòHave you tried clearing cache?‚Äô", "muted"],
        ["Epic Drop: ‚ÄòStackOverflow Answer from 2013‚Äô", "warn"],
        ["Cursed Drop: ‚ÄòNew dependency added‚Äô", "nope"],
      ];
      const [r, cls] = randomPick(rewards);
      showToast("Loot Box: " + r);
      addLog("Loot box opened: " + r, cls);
      unlock("Loot Goblin");
      beep(840, 70);
      if(memeMode || vibe > 55) for(let i=0;i<4;i++) spawnFloaty();
    });

    $("roastBtn").addEventListener("click", ()=>{
      unlock("Roasted");
      const roasts = [
        "You clicked ‚ÄòRoast Me‚Äô‚Ä¶ that‚Äôs bravery, or a cry for help.",
        "If confidence was a feature, yours would be in beta.",
        "You‚Äôre doing amazing. Not in the game. In general. (maybe).",
        "Your snake moved like it was on airport Wi-Fi.",
        "The site is down, but your commitment to chaos is up.",
      ];
      showToast(randomPick(roasts));
      addLog("Roast delivered. Emotional damage applied.", "warn");
      beep(480, 60);
    });

    $("memeBtn").addEventListener("click", ()=> setMemeMode(!memeMode));

    $("soundBtn").addEventListener("click", ()=>{
      sfxOn = !sfxOn;
      $("soundBtn").textContent = "üîä Sound FX: " + (sfxOn ? "On" : "Off");
      $("soundBtn").classList.toggle("toggleOn", sfxOn);
      showToast(sfxOn ? "Sound FX ON (tiny beeps only)" : "Sound FX OFF (peace restored)");
      if(sfxOn) beep(880, 80);
    });

    $("helpBtn").addEventListener("click", ()=>{
      showModal("Secret Controls",
        "‚Ä¢ Boss Key: press B (instant ‚Äòserious dashboard‚Äô)\n" +
        "‚Ä¢ Pause Snake: P\n" +
        "‚Ä¢ Konami Code: ‚Üë ‚Üë ‚Üì ‚Üì ‚Üê ‚Üí ‚Üê ‚Üí B A (try it)\n" +
        "‚Ä¢ Meme Mode: makes emojis rain (blame yourself)\n"
      );
      unlock("Read The Manual");
    });

    // ---------------------------
    // Vibe slider
    // ---------------------------
    const vibeRange = $("vibe");
    const vibeLabelEl = $("vibeLabel");
    vibeRange.addEventListener("input", ()=>{
      vibe = Number(vibeRange.value);
      vibeLabelEl.textContent = "Current vibe: " + vibeLabel();
      if(vibe > 80) unlock("Goblin Mode");
      if(memeMode){
        // adjust frequency
        if(memeTimer) clearInterval(memeTimer);
        memeTimer = setInterval(()=>{ if(Math.random() < 0.7) spawnFloaty(); }, Math.max(180, 600 - vibe*4));
      }
    });
    vibeLabelEl.textContent = "Current vibe: " + vibeLabel();

    // ---------------------------
    // Bingo
    // ---------------------------
    const excuses = [
      "It works on my machine",
      "DNS is haunted",
      "Caching issue (trust me)",
      "We‚Äôre ‚Äòoptimizing‚Äô",
      "A ‚Äòquick‚Äô hotfix",
      "Third-party API changed",
      "We‚Äôre ‚Äòmigrating‚Äô stuff",
      "Someone pushed to main",
      "It‚Äôs a feature",
    ];
    const bingoEl = $("bingo");

    function renderBingo(){
      bingoEl.innerHTML = "";
      excuses.forEach((t)=>{
        const d = document.createElement("div");
        d.className = "tile";
        d.textContent = t;
        d.addEventListener("click", ()=>{
          d.classList.toggle("on");
          checkBingo();
          beep(600, 40);
        });
        bingoEl.appendChild(d);
      });
    }

    function checkBingo(){
      const tiles = [...bingoEl.querySelectorAll(".tile")];
      const on = tiles.map(t=>t.classList.contains("on"));
      const lines = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      const bingo = lines.some(line => line.every(i => on[i]));
      if(bingo){
        showToast("BINGO! Reward: absolutely nothing üèÜ");
        addLog("BINGO achieved. Still not fixing the site though.", "ok");
        unlock("Bingo Enjoyer");
        beep(980, 120);
        if(memeMode || vibe > 60) for(let i=0;i<8;i++) spawnFloaty();
      }
    }

    $("resetBingo").addEventListener("click", ()=>{
      renderBingo();
      showToast("Bingo reset. Lies reloaded.");
      addLog("Excuse Bingo reset. Accountability avoided.", "muted");
    });
    renderBingo();

    // ---------------------------
    // Boss Key
    // ---------------------------
    const boss = $("boss");
    const mainUI = $("mainUI");
    const bossRows = $("bossRows");

    function randomKpiRows(){
      const rows = [
        ["Synergy Index", (80+Math.random()*19).toFixed(1)+"%", "‚Üó"],
        ["Stakeholder Happiness", (30+Math.random()*50).toFixed(0)+"%", "‚Üî"],
        ["Latency Reduction", (Math.random()*42).toFixed(1)+"ms", "‚Üò"],
        ["Revenue (Projected)", "‚Ç¨"+(100+Math.random()*900).toFixed(0)+"k", "‚Üó"],
        ["Meetings Avoided", (2+Math.random()*18).toFixed(0), "‚Üó"],
        ["Actual Work Done", (1+Math.random()*4).toFixed(1)+"%", "‚Üî"],
      ];
      bossRows.innerHTML = "";
      rows.forEach(r=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td>`;
        bossRows.appendChild(tr);
      });
    }

    let bossOn = false;
    function toggleBoss(){
      bossOn = !bossOn;
      boss.style.display = bossOn ? "block" : "none";
      mainUI.style.display = bossOn ? "none" : "grid";
      if(bossOn){
        randomKpiRows();
        unlock("Corporate Disguise");
        showToast("Boss Screen ON. You are now ‚Äòworking‚Äô.");
      }else{
        showToast("Boss Screen OFF. Back to chaos.");
      }
      beep(740, 70);
    }

    window.addEventListener("keydown", (e)=>{
      if(e.key.toLowerCase() === "b"){
        toggleBoss();
      }
    });

    // ---------------------------
    // Konami code
    // ---------------------------
    const KONAMI = ["arrowup","arrowup","arrowdown","arrowdown","arrowleft","arrowright","arrowleft","arrowright","b","a"];
    let kIndex = 0;
    let godMode = false;

    window.addEventListener("keydown", (e)=>{
      const key = e.key.toLowerCase();
      if(key === KONAMI[kIndex]){
        kIndex++;
        if(kIndex === KONAMI.length){
          kIndex = 0;
          godMode = !godMode;
          unlock("Secret Code");
          showToast(godMode ? "üíé KONAMI UNLOCKED: God Mode jokes activated" : "God Mode jokes disabled (coward)");
          addLog(godMode ? "Konami code entered. The universe is concerned." : "God mode disabled. Reality restored.", godMode ? "ok" : "warn");
          beep(1040, 120);
          if(memeMode || vibe > 55) for(let i=0;i<10;i++) spawnFloaty();
        }
      } else {
        kIndex = 0;
      }
    });

    // ---------------------------
    // Rage meter (snake)
    // ---------------------------
    const rageBar = $("rageBar");
    const rageLabel = $("rageLabel");
    let rage = 6;

    function setRage(n){
      rage = Math.max(0, Math.min(100, n));
      rageBar.style.width = rage + "%";
      rageLabel.textContent =
        rage < 15 ? "Calm-ish." :
        rage < 35 ? "Mildly annoyed (British level)." :
        rage < 60 ? "Spicy frustration." :
        rage < 85 ? "Keyboard looking throwable." :
        "Full gamer rage. Drink water.";
      if(rage >= 90) unlock("Rage Max");
    }
    setRage(rage);
    setInterval(()=> setRage(rage - (1 + Math.floor(vibe/50))), 3200);

    // ---------------------------
    // Snake Game
    // ---------------------------
    const canvas = $("game");
    const ctx = canvas.getContext("2d");

    const scoreEl = $("score");
    const bestEl  = $("best");
    const speedEl = $("speed");

    const startBtn = $("startBtn");
    const pauseBtn = $("pauseBtn");
    const hardBtn  = $("hardBtn");

    const GRID = 24;
    const COLS = Math.floor(canvas.width / GRID);
    const ROWS = Math.floor(canvas.height / GRID);

    const STORAGE_KEY = "maintenance_snake_best";
    let best = Number(localStorage.getItem(STORAGE_KEY) || 0);
    bestEl.textContent = best;

    let snake, dir, nextDir, food, score, running, paused, tickMs, hardMode;

    function resetGame(){
      snake = [{x: Math.floor(COLS/2), y: Math.floor(ROWS/2)}];
      dir = {x: 1, y: 0};
      nextDir = {x: 1, y: 0};
      score = 0;
      running = true;
      paused = false;
      tickMs = hardMode ? 85 : 120;
      placeFood();
      scoreEl.textContent = score;
      updateSpeedLabel();
      addLog(hardMode ? "Hard mode enabled. Reflexes required." : "Snake restarted. Productivity paused.", "ok");
      beep(600, 60);
    }

    function updateSpeedLabel(){
      const base = 120;
      const mult = (base / tickMs);
      speedEl.textContent = mult.toFixed(1) + "x";
    }

    function placeFood(){
      while(true){
        const fx = Math.floor(Math.random()*COLS);
        const fy = Math.floor(Math.random()*ROWS);
        if(!snake.some(s=>s.x===fx && s.y===fy)){
          food = {x: fx, y: fy};
          return;
        }
      }
    }

    function overlayText(big, small){
      ctx.save();
      ctx.globalAlpha = 0.85;
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.globalAlpha = 1;
      ctx.fillStyle = "white";
      ctx.font = "900 42px system-ui, sans-serif";
      ctx.textAlign = "center";
      ctx.fillText(big, canvas.width/2, canvas.height/2 - 10);
      ctx.font = "500 16px system-ui, sans-serif";
      ctx.fillText(small, canvas.width/2, canvas.height/2 + 24);
      ctx.restore();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // grid
      ctx.globalAlpha = 0.18;
      for(let x=0;x<=COLS;x++){ ctx.beginPath(); ctx.moveTo(x*GRID,0); ctx.lineTo(x*GRID,canvas.height); ctx.stroke(); }
      for(let y=0;y<=ROWS;y++){ ctx.beginPath(); ctx.moveTo(0,y*GRID); ctx.lineTo(canvas.width,y*GRID); ctx.stroke(); }
      ctx.globalAlpha = 1;

      // food
      ctx.fillRect(food.x*GRID+4, food.y*GRID+4, GRID-8, GRID-8);

      // snake
      snake.forEach((s,i)=>{
        const pad = i===0 ? 3 : 5;
        ctx.fillRect(s.x*GRID+pad, s.y*GRID+pad, GRID-(pad*2), GRID-(pad*2));
      });

      if(!running){
        overlayText("Game over üíÄ", "Press Start / Restart");
      } else if(paused){
        overlayText("Paused ‚è∏", "Press P or Pause");
      }
    }

    function step(){
      if(!running || paused) return;

      dir = nextDir;
      const head = snake[0];
      const newHead = {x: head.x + dir.x, y: head.y + dir.y};

      if(newHead.x < 0 || newHead.x >= COLS || newHead.y < 0 || newHead.y >= ROWS){
        die(godMode ? "Wall collided with YOU. Unacceptable." : "Snake tried to escape. Same honestly.");
        return;
      }
      if(snake.some(s => s.x === newHead.x && s.y === newHead.y)){
        die(godMode ? "You ate yourself with confidence. Iconic." : "Snake got philosophical and ate itself.");
        return;
      }

      snake.unshift(newHead);

      if(newHead.x === food.x && newHead.y === food.y){
        score++;
        scoreEl.textContent = score;

        if(score % 4 === 0){
          tickMs = Math.max(55, tickMs - (hardMode ? 6 : 4));
          updateSpeedLabel();
        }

        if(score > best){
          best = score;
          localStorage.setItem(STORAGE_KEY, String(best));
          bestEl.textContent = best;
          showToast("New best! Your procrastination is evolving.");
          unlock("High Score Energy");
        }

        placeFood();
        addLog(randomPick([
          "Snack acquired. Performance review pending.",
          "Apple defeated. Again.",
          "Crunchy pixels consumed successfully.",
          "The snake approves your life choices (for now).",
          "You‚Äôre basically a professional snake handler."
        ]), "ok");
        beep(880, 45);

        if(score >= 10) unlock("Double Digits");
        if(score >= 25) unlock("Snake Specialist");
      } else {
        snake.pop();
      }
    }

    function die(message){
      running = false;
      setRage(rage + 18);
      addLog(message, "nope");
      addLog(godMode ? "God Mode note: skill issue (respectfully)." : "Maintenance tip: stare at the bug until it feels guilty.", "warn");
      showToast("Oof. Rage meter increased.");
      beep(220, 120);
      unlock("It Be Like That");
      if(memeMode || vibe > 70) for(let i=0;i<8;i++) spawnFloaty();
    }

    function setDirection(x,y){
      if((dir.x === 1 && x === -1) || (dir.x === -1 && x === 1) ||
         (dir.y === 1 && y === -1) || (dir.y === -1 && y === 1)) return;
      nextDir = {x,y};
    }

    window.addEventListener("keydown", (e)=>{
      const k = e.key.toLowerCase();
      if(k === "arrowup" || k === "w") setDirection(0,-1);
      if(k === "arrowdown" || k === "s") setDirection(0,1);
      if(k === "arrowleft" || k === "a") setDirection(-1,0);
      if(k === "arrowright" || k === "d") setDirection(1,0);
      if(k === "p") togglePause();
    });

    function togglePause(){
      if(!running) return;
      paused = !paused;
      addLog(paused ? "Paused. Look busy." : "Unpaused. Back to snake business.", paused ? "warn" : "ok");
      draw();
      beep(500, 50);
    }

    startBtn.addEventListener("click", ()=>{ resetGame(); draw(); });
    pauseBtn.addEventListener("click", togglePause);

    hardBtn.addEventListener("click", ()=>{
      hardMode = !hardMode;
      hardBtn.classList.toggle("primary", hardMode);
      showToast(hardMode ? "Hard mode ON üòà" : "Hard mode OFF üòå");
      addLog(hardMode ? "Hard mode enabled. Blame future you." : "Hard mode disabled. Peace treaty signed.", hardMode ? "warn" : "ok");
      resetGame(); draw();
      if(hardMode) unlock("Masochist");
    });

    // Start loop
    hardMode = false;
    resetGame(); draw();

    let last = performance.now();
    function loop(now){
      const elapsed = now - last;
      if(elapsed >= tickMs){
        last = now;
        step();
        draw();
      }
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);
  </script>
</body>
</html>
