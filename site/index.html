<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Raheem AI | Construction Compliance Intelligence</title>

  <style>
    :root{
      --bg0:#050610;
      --bg1:#070a18;
      --bg2:#0a0f22;

      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.11);
      --stroke: rgba(255,255,255,.14);
      --stroke2: rgba(255,255,255,.22);

      --text:#f4f7ff;
      --muted: rgba(244,247,255,.78);
      --muted2: rgba(244,247,255,.60);

      --a1:#50ffd7;   /* neon mint */
      --a2:#65b7ff;   /* neon blue */
      --a3:#c7a5ff;   /* neon violet */
      --hot:#ff4fd8;  /* neon pink accent */

      --ok:#22c55e;
      --warn:#f59e0b;

      --shadow: 0 28px 72px rgba(0,0,0,.58);
      --shadow2: 0 18px 48px rgba(0,0,0,.42);

      --r:22px;
      --r2:16px;

      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background: radial-gradient(1200px 700px at 20% -10%, rgba(80,255,215,.18), transparent 60%),
                  radial-gradient(1100px 650px at 85% 0%, rgba(101,183,255,.18), transparent 58%),
                  radial-gradient(900px 620px at 50% 115%, rgba(199,165,255,.16), transparent 58%),
                  linear-gradient(180deg, var(--bg0), var(--bg1) 35%, var(--bg2));
      overflow-x:hidden;
    }

    /* ---------- Motion background ---------- */
    .bg-wrap{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none;
      overflow:hidden;
    }

    .aurora{
      position:absolute;
      inset:-25%;
      background:
        radial-gradient(900px 520px at 12% 18%, rgba(80,255,215,.18) 0%, rgba(80,255,215,0) 65%),
        radial-gradient(900px 520px at 88% 14%, rgba(101,183,255,.18) 0%, rgba(101,183,255,0) 62%),
        radial-gradient(980px 560px at 50% 108%, rgba(199,165,255,.16) 0%, rgba(199,165,255,0) 60%),
        radial-gradient(840px 520px at 45% 40%, rgba(255,79,216,.08) 0%, rgba(255,79,216,0) 60%);
      filter: blur(18px);
      opacity:.95;
      transform: translate3d(0,0,0);
      animation: auroraMove 14s ease-in-out infinite;
    }
    @keyframes auroraMove{
      0%,100%{ transform: translate3d(0,0,0) scale(1); }
      40%{ transform: translate3d(18px,-14px,0) scale(1.03); }
      75%{ transform: translate3d(-18px,12px,0) scale(1.02); }
    }

    canvas#particles{
      position:absolute;
      inset:0;
      opacity:.55;
      filter: blur(.15px);
    }

    .vignette{
      position:absolute;
      inset:-1px;
      background: radial-gradient(900px 520px at 50% 20%, rgba(0,0,0,0), rgba(0,0,0,.55));
      opacity:.9;
    }

    /* ---------- Layout ---------- */
    .app{
      position:relative;
      z-index:1;
      min-height:100vh;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 18px;
      padding: 18px;
    }

    @media (max-width: 980px){
      .app{ grid-template-columns: 1fr; }
      .side{ position:sticky; top:0; }
    }

    .side{
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border-radius: var(--r);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }

    .main{
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: calc(100vh - 36px);
    }

    /* ---------- Brand / header ---------- */
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      padding: 16px 16px 12px 16px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }

    .mark{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      position:relative;
      background: radial-gradient(18px 18px at 30% 30%, rgba(80,255,215,.95), rgba(80,255,215,0) 70%),
                  radial-gradient(20px 20px at 75% 35%, rgba(101,183,255,.95), rgba(101,183,255,0) 72%),
                  radial-gradient(22px 22px at 55% 80%, rgba(199,165,255,.90), rgba(199,165,255,0) 72%),
                  linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 0 28px rgba(80,255,215,.14), 0 0 26px rgba(101,183,255,.12);
      overflow:hidden;
    }
    .mark:after{
      content:"";
      position:absolute;
      inset:-40%;
      background: conic-gradient(from 180deg, rgba(80,255,215,.0), rgba(80,255,215,.25), rgba(101,183,255,.0), rgba(255,79,216,.18), rgba(199,165,255,.0));
      animation: spin 7s linear infinite;
      opacity:.85;
    }
    @keyframes spin{ to{ transform: rotate(360deg);} }

    .brand h1{
      margin:0;
      font-size: 18px;
      letter-spacing:.6px;
      font-weight: 800;
      line-height:1.1;
    }
    .brand h1 span{
      background: linear-gradient(90deg, var(--a1), var(--a2), var(--a3));
      -webkit-background-clip: text;
      background-clip:text;
      color: transparent;
      text-shadow: 0 0 22px rgba(101,183,255,.15);
    }
    .brand .sub{
      margin-top:4px;
      font-size: 12px;
      color: var(--muted2);
      line-height:1.2;
    }

    /* ---------- Side nav ---------- */
    .nav{
      padding: 12px 12px 14px 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .navbtn{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: var(--text);
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .navbtn:hover{
      transform: translateY(-1px);
      border-color: rgba(101,183,255,.34);
      background: rgba(0,0,0,.24);
    }
    .navbtn .left{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .tag{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      color: var(--muted);
      background: rgba(255,255,255,.06);
      white-space:nowrap;
    }
    .tag.live{
      border-color: rgba(34,197,94,.45);
      color: rgba(230,255,240,.92);
      background: rgba(34,197,94,.10);
    }

    /* ---------- Chat list (only in chat view) ---------- */
    .chatlist{
      display:none;
      padding: 0 12px 12px 12px;
    }
    .chatlist.show{ display:block; }
    .chatlist h3{
      margin: 10px 4px 8px 4px;
      font-size: 12px;
      color: var(--muted2);
      font-weight:700;
      letter-spacing:.35px;
      text-transform:uppercase;
    }
    .chatitem{
      width:100%;
      text-align:left;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      color: var(--text);
      cursor:pointer;
      margin-bottom: 8px;
      transition: border-color .15s ease, transform .15s ease;
    }
    .chatitem:hover{ transform: translateY(-1px); border-color: rgba(80,255,215,.28); }
    .chatitem .t{ font-weight:750; font-size: 13px; }
    .chatitem .s{ margin-top:3px; font-size: 11px; color: var(--muted2); }

    .sidefoot{
      padding: 12px 16px 14px 16px;
      border-top: 1px solid rgba(255,255,255,.10);
      color: var(--muted2);
      font-size: 12px;
      line-height:1.35;
    }

    /* ---------- Main header ---------- */
    .topbar{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
    }
    .crumb{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }
    .crumb .title{
      font-weight: 850;
      letter-spacing:.25px;
      font-size: 15px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .crumb .hint{
      font-size: 12px;
      color: var(--muted2);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .actions{
      display:flex; gap:10px; align-items:center;
    }
    .btn{
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      font-weight: 750;
      font-size: 13px;
      white-space:nowrap;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(101,183,255,.36);
      background: rgba(255,255,255,.10);
    }
    .btn.primary{
      border-color: rgba(80,255,215,.38);
      background: linear-gradient(135deg, rgba(80,255,215,.18), rgba(101,183,255,.12));
      box-shadow: 0 0 24px rgba(80,255,215,.10);
    }

    /* ---------- Views ---------- */
    .view{ display:none; padding: 18px; }
    .view.show{ display:block; }

    .hero{
      padding: 16px;
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: radial-gradient(900px 320px at 20% 0%, rgba(80,255,215,.14), transparent 65%),
                  radial-gradient(900px 320px at 90% 0%, rgba(101,183,255,.12), transparent 62%),
                  rgba(0,0,0,.16);
      box-shadow: var(--shadow2);
    }
    .hero h2{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .hero p{
      margin:8px 0 0 0;
      color: var(--muted);
      max-width: 920px;
      line-height:1.5;
    }
    .quote{
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(244,247,255,.92);
      line-height:1.45;
    }

    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      box-shadow: var(--shadow2);
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .cardhead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }
    .cardtitle{
      display:flex;
      gap: 12px;
      align-items:flex-start;
    }
    .icon{
      width: 42px;
      height: 42px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      font-weight: 900;
      letter-spacing:.4px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(135deg, rgba(80,255,215,.14), rgba(101,183,255,.10), rgba(199,165,255,.08));
      box-shadow: 0 0 22px rgba(101,183,255,.08);
    }
    .card h4{ margin:0; font-size: 15px; }
    .card p{ margin:6px 0 0 0; color: var(--muted); line-height:1.45; }

    .pill{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      color: var(--muted);
      background: rgba(255,255,255,.06);
      white-space:nowrap;
      align-self:flex-start;
    }

    .cta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-top:auto;
    }

    /* ---------- Chat UI ---------- */
    .chatwrap{
      display:flex;
      flex-direction:column;
      gap: 12px;
      height: calc(100vh - 168px);
      min-height: 520px;
    }
    .chatbox{
      flex: 1;
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      padding: 14px;
      overflow:auto;
    }

    .msg{
      max-width: 78%;
      padding: 12px 12px;
      border-radius: 18px;
      margin: 10px 0;
      line-height:1.5;
      border: 1px solid rgba(255,255,255,.12);
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .msg.user{
      margin-left:auto;
      background: linear-gradient(135deg, rgba(80,255,215,.18), rgba(101,183,255,.12));
      border-color: rgba(80,255,215,.30);
      box-shadow: 0 0 18px rgba(80,255,215,.06);
    }
    .msg.ai{
      background: rgba(255,255,255,.06);
    }

    .composer{
      display:flex;
      gap: 10px;
      align-items:flex-end;
    }
    textarea{
      flex:1;
      min-height: 46px;
      max-height: 150px;
      resize: vertical;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      color: var(--text);
      outline:none;
      line-height:1.4;
    }
    textarea:focus{
      border-color: rgba(101,183,255,.40);
      box-shadow: 0 0 0 3px rgba(101,183,255,.12);
    }

    .row{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .toggle{
      display:flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size: 12px;
      user-select:none;
    }
    .toggle input{ transform: translateY(1px); }

    /* ---------- Toast ---------- */
    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      z-index: 50;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      color: rgba(244,247,255,.95);
      box-shadow: var(--shadow2);
      display:none;
      max-width: min(680px, calc(100vw - 26px));
      line-height:1.4;
    }
    .toast.show{ display:block; animation: pop .18s ease; }
    @keyframes pop{ from{ transform: translateX(-50%) translateY(8px); opacity:0; } to{ transform: translateX(-50%) translateY(0); opacity:1; } }

    /* ---------- Footer ---------- */
    .footer{
      margin-top: 14px;
      padding: 14px 16px;
      border-top: 1px solid rgba(255,255,255,.10);
      color: var(--muted2);
      font-size: 12px;
      line-height:1.35;
      display:flex;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
      background: rgba(0,0,0,.10);
    }
    .copy{
      color: rgba(244,247,255,.78);
    }
  </style>
</head>

<body>
  <div class="bg-wrap">
    <div class="aurora"></div>
    <canvas id="particles"></canvas>
    <div class="vignette"></div>
  </div>

  <div class="app">
    <!-- SIDE -->
    <aside class="side">
      <div class="brand">
        <div class="mark" aria-hidden="true"></div>
        <div>
          <h1><span>Raheem AI</span></h1>
          <div class="sub">Construction compliance + project intelligence</div>
        </div>
      </div>

      <div class="nav">
        <button class="navbtn" id="navHome" type="button">
          <div class="left">
            <span class="tag">Dashboard</span>
            <div style="min-width:0">
              <div style="font-weight:850">Overview</div>
              <div style="font-size:12px;color:var(--muted2);margin-top:2px">Live tools + roadmap</div>
            </div>
          </div>
          <span class="tag">‚Üó</span>
        </button>

        <button class="navbtn" id="navChat" type="button">
          <div class="left">
            <span class="tag live">Live</span>
            <div style="min-width:0">
              <div style="font-weight:850">Chat</div>
              <div style="font-size:12px;color:var(--muted2);margin-top:2px">Best-friend + compliance brain</div>
            </div>
          </div>
          <span class="tag">‚Üó</span>
        </button>

        <button class="navbtn" id="navFuture" type="button">
          <div class="left">
            <span class="tag">Roadmap</span>
            <div style="min-width:0">
              <div style="font-weight:850">Future Features</div>
              <div style="font-size:12px;color:var(--muted2);margin-top:2px">Reports, BIM, manufacturers</div>
            </div>
          </div>
          <span class="tag">‚Üó</span>
        </button>
      </div>

      <div class="chatlist" id="chatList">
        <h3>Saved chats</h3>
        <div id="chatItems"></div>
        <button class="btn" id="btnNewChat" type="button" style="width:100%; margin-top:6px;">New chat</button>
      </div>

      <div class="sidefoot">
        <div style="font-weight:800; color: rgba(244,247,255,.85)">Built for professionals.</div>
        <div style="margin-top:6px;">
          Calm answers when it‚Äôs casual.<br/>
          Proper citations when it‚Äôs compliance.
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <div class="topbar">
        <div class="crumb">
          <div class="title" id="viewTitle">Overview</div>
          <div class="hint" id="viewHint">Live tools + roadmap</div>
        </div>
        <div class="actions">
          <button class="btn" id="btnPing" type="button">Health</button>
          <button class="btn primary" id="btnSwagger" type="button">Swagger</button>
        </div>
      </div>

      <!-- OVERVIEW -->
      <section class="view show" id="viewHome">
        <div class="hero">
          <h2>Fast answers. Fewer mistakes. Less rework.</h2>
          <p>
            Raheem AI is built to chat like a normal human when you're brainstorming,
            and switch into serious compliance mode the second you ask something technical.
          </p>
          <div class="quote">
            ‚ÄúIf it‚Äôs a quick idea ‚Äî we talk. If it‚Äôs a regulation ‚Äî we verify.‚Äù
          </div>
        </div>

        <div class="grid">
          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">CG</div>
                <div>
                  <h4>Compliance Guidance (Live)</h4>
                  <p>Ask anything. It will search the right guidance and answer with support when needed.</p>
                </div>
              </div>
              <span class="pill" style="border-color: rgba(34,197,94,.45); background: rgba(34,197,94,.10); color: rgba(230,255,240,.92)">Live</span>
            </div>
            <div class="cta">
              <span class="pill">Auto mode ‚Ä¢ optional force-docs</span>
              <button class="btn primary" id="btnStartChat" type="button">Start</button>
            </div>
          </article>

          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">FF</div>
                <div>
                  <h4>Future Features (Roadmap)</h4>
                  <p>Reports, BIM review, manufacturer/spec search, energy workflows ‚Äî all inside the same platform.</p>
                </div>
              </div>
              <span class="pill">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill">Preview the plan</span>
              <button class="btn" id="btnOpenFuture" type="button">View</button>
            </div>
          </article>
        </div>

        <div class="footer">
          <div class="copy">¬© 2026 Abdulraheem Hayder Ahmed ¬∑ C22310933 ¬∑ TU Dublin ¬∑ Architectural Technology</div>
          <div>Raheem AI ‚Äî Construction Compliance Intelligence</div>
        </div>
      </section>

      <!-- CHAT -->
      <section class="view" id="viewChat">
        <div class="hero">
          <h2>Chat</h2>
          <p>
            Talk normally. If you drift into regs/compliance, it snaps into professional mode automatically.
            (You can also force document mode if you want it extra strict.)
          </p>
        </div>

        <div class="chatwrap">
          <div class="row" style="justify-content:space-between;">
            <div class="row">
              <label class="toggle">
                <input type="checkbox" id="forceDocs"/>
                Force document mode
              </label>
            </div>
            <div class="row">
              <button class="btn" id="btnClear" type="button">Clear chat</button>
            </div>
          </div>

          <div class="chatbox" id="chatBox"></div>

          <div class="composer">
            <textarea id="msg" placeholder="Say something‚Ä¶"></textarea>
            <button class="btn primary" id="send" type="button">Send</button>
          </div>
        </div>

        <div class="footer">
          <div class="copy">¬© 2026 Abdulraheem Hayder Ahmed ¬∑ C22310933 ¬∑ TU Dublin ¬∑ Architectural Technology</div>
          <div>Tip: If you want exact numbers, toggle ‚ÄúForce document mode‚Äù.</div>
        </div>
      </section>

      <!-- FUTURE -->
      <section class="view" id="viewFuture">
        <div class="hero">
          <h2>Future Features</h2>
          <p>
            Expanding Raheem AI into a full compliance and certification workflow ‚Äî clear, structured, verifiable outputs.
          </p>
          <div class="quote">
            The roadmap is ambitious. The goal is simple: fewer errors, faster approvals, less stress.
          </div>
        </div>

        <div class="grid">
          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">ED</div>
                <div>
                  <h4>Early Design</h4>
                  <p>Enter areas + requirements. Generate layout directions and refine the best option.</p>
                </div>
              </div>
              <span class="pill">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill">Example: 30m¬≤ ‚Ä¢ 2 bed ‚Ä¢ kitchen</span>
              <button class="btn" data-soon="Early Design">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">DAC</div>
                <div>
                  <h4>DAC Report Generator</h4>
                  <p>Draft structured DAC reports aligned to guidance and project inputs, ready for review.</p>
                </div>
              </div>
              <span class="pill">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill">Access & use</span>
              <button class="btn" data-soon="DAC Reports">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">FCS</div>
                <div>
                  <h4>Fire Cert Report Generator</h4>
                  <p>Generate structured fire safety report drafts with consistent headings and traceable checks.</p>
                </div>
              </div>
              <span class="pill">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill">TGD B + workflow</span>
              <button class="btn" data-soon="Fire Cert Reports">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">MFG</div>
                <div>
                  <h4>Manufacturer & Spec Search</h4>
                  <p>Auto-search local manufacturers and specs using element parameters and project context.</p>
                </div>
              </div>
              <span class="pill">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill">Local + verified sources</span>
              <button class="btn" data-soon="Manufacturer Search">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="cardhead">
              <div class="cardtitle">
                <div class="icon">BER</div>
                <div>
                  <h4>BER Report Generator</h4>
                  <p>Learn DEAP logic, import a Revit model, auto-fill what we can ‚Äî manual input only where needed.</p>
                </div>
              </div>
              <span class="pill">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill">DEAP + Revit import</span>
              <button class="btn" data-soon="BER Reports">Preview</button>
            </div>
          </article>
        </div>

        <div class="footer">
          <div class="copy">¬© 2026 Abdulraheem Hayder Ahmed ¬∑ C22310933 ¬∑ TU Dublin ¬∑ Architectural Technology</div>
          <div>Roadmap items are under active design.</div>
        </div>
      </section>
    </main>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // --------------------------
    // Simple toast
    // --------------------------
    const toast = document.getElementById("toast");
    let toastTimer = null;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toast.classList.remove("show"), 2600);
    }

    // --------------------------
    // Navigation
    // --------------------------
    const viewTitle = document.getElementById("viewTitle");
    const viewHint  = document.getElementById("viewHint");
    const viewHome  = document.getElementById("viewHome");
    const viewChat  = document.getElementById("viewChat");
    const viewFuture= document.getElementById("viewFuture");

    const chatList  = document.getElementById("chatList");

    function showView(which){
      [viewHome, viewChat, viewFuture].forEach(v=>v.classList.remove("show"));
      chatList.classList.remove("show");

      if(which==="home"){
        viewHome.classList.add("show");
        viewTitle.textContent = "Overview";
        viewHint.textContent  = "Live tools + roadmap";
      }
      if(which==="chat"){
        viewChat.classList.add("show");
        viewTitle.textContent = "Chat";
        viewHint.textContent  = "Memory stays per conversation";
        chatList.classList.add("show");
        renderChatList();
      }
      if(which==="future"){
        viewFuture.classList.add("show");
        viewTitle.textContent = "Future Features";
        viewHint.textContent  = "Roadmap preview";
      }
    }

    document.getElementById("navHome").onclick  = ()=>showView("home");
    document.getElementById("navChat").onclick  = ()=>showView("chat");
    document.getElementById("navFuture").onclick= ()=>showView("future");

    document.getElementById("btnStartChat").onclick = ()=>showView("chat");
    document.getElementById("btnOpenFuture").onclick = ()=>showView("future");

    // Swagger + health
    document.getElementById("btnSwagger").onclick = ()=> window.open("/swagger", "_blank");
    document.getElementById("btnPing").onclick = async ()=>{
      try{
        const r = await fetch("/health");
        const j = await r.json();
        showToast(j.vertex_ready ? "Healthy. Vertex is ready ‚úÖ" : "Healthy‚Ä¶ but Vertex isn‚Äôt ready yet ‚ö†Ô∏è");
      }catch(e){
        showToast("Health check failed ‚ö†Ô∏è");
      }
    };

    // Future feature buttons
    document.querySelectorAll("[data-soon]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const name = btn.getAttribute("data-soon");
        const lines = [
          `${name} is coming soon.`,
          `It‚Äôs cooking. Please don‚Äôt stand over the pot üòÑ`,
          `Not live yet ‚Äî patience‚Ä¶ I‚Äôm trying to make it *good* üòÑ`,
          `Soon‚Ñ¢. The professional version of ‚Äútrust me bro‚Äù üòÑ`
        ];
        showToast(lines[Math.floor(Math.random()*lines.length)]);
      });
    });

    // --------------------------
    // Particles background (alive)
    // --------------------------
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d");
    let W=0,H=0, particles=[];
    function resize(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
      const n = Math.floor(Math.min(140, Math.max(60, W/14)));
      particles = Array.from({length:n}).map(()=>({
        x: Math.random()*W,
        y: Math.random()*H,
        r: Math.random()*1.6 + 0.6,
        vx:(Math.random()*0.5+0.15)*(Math.random()<0.5?-1:1),
        vy:(Math.random()*0.35+0.12)*(Math.random()<0.5?-1:1),
        a: Math.random()*0.6 + 0.2
      }));
    }
    window.addEventListener("resize", resize);
    resize();

    function tick(){
      ctx.clearRect(0,0,W,H);
      for(const p of particles){
        p.x += p.vx; p.y += p.vy;
        if(p.x < -20) p.x = W+20;
        if(p.x > W+20) p.x = -20;
        if(p.y < -20) p.y = H+20;
        if(p.y > H+20) p.y = -20;

        ctx.globalAlpha = p.a;
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fillStyle = "white";
        ctx.fill();
      }
      ctx.globalAlpha = 1;
      requestAnimationFrame(tick);
    }
    tick();

    // --------------------------
    // Chat memory (per saved chat)
    // Uses /chat_stream with full history so it never "resets".
    // --------------------------
    const chatBox = document.getElementById("chatBox");
    const msgEl = document.getElementById("msg");
    const sendBtn = document.getElementById("send");
    const forceDocsEl = document.getElementById("forceDocs");
    const btnClear = document.getElementById("btnClear");

    const STORAGE_KEY = "raheem_ai_chats_v2";

    function loadAllChats(){
      try{ return JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}"); }
      catch(e){ return {}; }
    }
    function saveAllChats(obj){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
    }

    function newChatId(){
      return "chat_" + Date.now().toString(36) + "_" + Math.random().toString(36).slice(2,7);
    }

    let activeChatId = null;

    function ensureActiveChat(){
      const all = loadAllChats();
      if(!activeChatId || !all[activeChatId]){
        activeChatId = newChatId();
        all[activeChatId] = {
          title: "New chat",
          updated: Date.now(),
          messages: [
            { role:"assistant", content:"Hey ‚Äî I‚Äôm Raheem. What are we getting into today?" }
          ]
        };
        saveAllChats(all);
      }
      return all;
    }

    function setChatTitleFromFirstUser(all, chatId){
      const c = all[chatId];
      if(!c) return;
      const firstUser = c.messages.find(m=>m.role==="user");
      if(firstUser && (c.title==="New chat" || !c.title)){
        c.title = firstUser.content.slice(0, 42) + (firstUser.content.length>42 ? "‚Ä¶" : "");
      }
    }

    function renderChatList(){
      const all = loadAllChats();
      const items = Object.entries(all)
        .sort((a,b)=>(b[1].updated||0)-(a[1].updated||0))
        .slice(0, 24);

      const wrap = document.getElementById("chatItems");
      wrap.innerHTML = "";
      for(const [id, chat] of items){
        const btn = document.createElement("button");
        btn.className = "chatitem";
        btn.innerHTML = `<div class="t">${escapeHtml(chat.title || "Chat")}</div>
                         <div class="s">${new Date(chat.updated||Date.now()).toLocaleString()}</div>`;
        btn.onclick = ()=>{
          activeChatId = id;
          renderChat();
        };
        wrap.appendChild(btn);
      }
    }

    document.getElementById("btnNewChat").onclick = ()=>{
      activeChatId = null;
      ensureActiveChat();
      renderChatList();
      renderChat();
      showToast("New chat created ‚úÖ");
    };

    function escapeHtml(s){
      return (s||"").replace(/[&<>"']/g, c => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[c]));
    }

    function renderChat(){
      const all = ensureActiveChat();
      const chat = all[activeChatId];
      chatBox.innerHTML = "";
      for(const m of chat.messages){
        const div = document.createElement("div");
        div.className = "msg " + (m.role==="user" ? "user" : "ai");
        div.textContent = m.content;
        chatBox.appendChild(div);
      }
      chatBox.scrollTop = chatBox.scrollHeight;
      renderChatList();
    }

    btnClear.onclick = ()=>{
      const all = ensureActiveChat();
      all[activeChatId].messages = [
        { role:"assistant", content:"Alright ‚Äî clean slate. What‚Äôs next?" }
      ];
      all[activeChatId].updated = Date.now();
      all[activeChatId].title = "New chat";
      saveAllChats(all);
      renderChat();
      showToast("Cleared ‚úÖ");
    };

    // Stream parser for SSE over fetch
    async function streamChat(messages, forceDocs){
      const resp = await fetch("/chat_stream", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ messages, force_docs: !!forceDocs })
      });

      if(!resp.ok){
        const t = await resp.text();
        throw new Error(t || "Request failed");
      }

      const reader = resp.body.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      let done = false;

      let assistantText = "";

      while(!done){
        const { value, done: d } = await reader.read();
        done = d;
        if(value){
          buffer += decoder.decode(value, {stream:true});
          // split by double newline (SSE frame boundary)
          let idx;
          while((idx = buffer.indexOf("\n\n")) !== -1){
            const frame = buffer.slice(0, idx);
            buffer = buffer.slice(idx+2);

            // handle data lines
            const lines = frame.split("\n");
            for(const line of lines){
              if(line.startsWith("data: ")){
                const payload = line.slice(6);
                const text = payload.replaceAll("\\n", "\n");
                assistantText += text;

                // live update last assistant bubble
                updateAssistantBubble(assistantText);
              }
              if(line.startsWith("event: done")){
                done = true;
              }
              if(line.startsWith("event: error")){
                // next line might have data, but we keep it simple
              }
            }
          }
        }
      }
      return assistantText.trim();
    }

    function updateAssistantBubble(text){
      // replace last AI message bubble text visually while streaming
      const bubbles = chatBox.querySelectorAll(".msg.ai");
      const last = bubbles[bubbles.length-1];
      if(last){
        last.textContent = text;
        chatBox.scrollTop = chatBox.scrollHeight;
      }
    }

    async function send(){
      const text = (msgEl.value || "").trim();
      if(!text) return;

      const all = ensureActiveChat();
      const chat = all[activeChatId];

      // add user message
      chat.messages.push({ role:"user", content:text });
      chat.updated = Date.now();
      saveAllChats(all);
      renderChat();

      msgEl.value = "";

      // add placeholder assistant bubble
      const all2 = ensureActiveChat();
      all2[activeChatId].messages.push({ role:"assistant", content:"" });
      all2[activeChatId].updated = Date.now();
      saveAllChats(all2);
      renderChat();

      try{
        const assistant = await streamChat(all2[activeChatId].messages, forceDocsEl.checked);

        const all3 = ensureActiveChat();
        all3[activeChatId].messages[all3[activeChatId].messages.length-1].content = assistant || "‚Ä¶";
        all3[activeChatId].updated = Date.now();
        setChatTitleFromFirstUser(all3, activeChatId);
        saveAllChats(all3);
        renderChat();
      }catch(e){
        const all3 = ensureActiveChat();
        all3[activeChatId].messages[all3[activeChatId].messages.length-1].content =
          "Hmm ‚Äî something broke on my side. Try again in a sec (or check /swagger for errors).";
        all3[activeChatId].updated = Date.now();
        saveAllChats(all3);
        renderChat();
        showToast("Backend error ‚ö†Ô∏è");
      }
    }

    sendBtn.onclick = send;
    msgEl.addEventListener("keydown", (e)=>{
      if(e.key==="Enter" && !e.shiftKey){
        e.preventDefault();
        send();
      }
    });

    // Boot
    ensureActiveChat();
    renderChatList();
    renderChat();
    showView("home");
  </script>
</body>
</html>
